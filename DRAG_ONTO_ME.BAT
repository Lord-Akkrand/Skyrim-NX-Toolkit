@ECHO OFF

>CON ECHO Starting up...
SET TOOLKIT_PATH=%~d0%~p0
SET SCRIPTS_PATH=%TOOLKIT_PATH%Scripts\

SET CONVERT_PATH_PY="%SCRIPTS_PATH%convert_path.py"
>CON ECHO convert_path.py is set at %CONVERT_PATH_PY%

>CON ECHO Akkrand's NX Texture Conversion Scripts v3.2.3
pause


SET PATH=%PATH%;%SCRIPTS_PATH%

>CON ECHO Finding Python 3.x path
>CON CALL FIND_PYTHON_PATH
IF ERRORLEVEL 1 GOTO pythonError

>CON ECHO Found Python 3.x path

SET ORIGINAL=%~f1
SET MOD_NAME=%~n1
SET DUPLICATE=%~f1_Converted
SET DUPLICATE_DATA=%DUPLICATE%\Data

>CON ECHO Making "%DUPLICATE%"
ROBOCOPY "%ORIGINAL%" "%DUPLICATE_DATA%" /MIR

>CON ECHO Converting "%DUPLICATE%"
%PYTHON3% %CONVERT_PATH_PY% "%MOD_NAME%" "%DUPLICATE%"
>CON ECHO Done
PAUSE

GOTO :EOF

:pythonError
>CON ECHO Error finding Python path
